<!DOCTYPE html>
<html lang="es">
<head>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Turismo Inclusivo Ecuador - Portal Tur√≠stico Accesible</title>
  <meta name="description" content="Portal tur√≠stico inclusivo de Ecuador con informaci√≥n accesible sobre destinos, rutas y servicios tur√≠sticos" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>

{% set textos = {
  'es': {
    'inicio': 'Inicio',
    'rutas': 'Rutas',
    'contacto': 'Contacto',
    'login': 'Iniciar sesi√≥n',
    'registro': 'Registrarse',
    'accesibilidad': 'Accesibilidad',
    'hero_title': 'Descubre la Magia de Ecuador',
    'hero_subtitle': 'Explora destinos √∫nicos con accesibilidad garantizada para todos los viajeros',
    'destinos_titulo': 'Destinos Destacados',
    'ver_mas': 'Ver m√°s'
  },
  'en': {
    'inicio': 'Home',
    'rutas': 'Routes',
    'contacto': 'Contact',
    'login': 'Login',
    'registro': 'Sign up',
    'accesibilidad': 'Accessibility',
    'hero_title': 'Discover Ecuador\'s Magic',
    'hero_subtitle': 'Explore unique destinations with guaranteed accessibility for all travelers',
    'destinos_titulo': 'Featured Destinations',
    'ver_mas': 'Learn more'
  }
} %}

<div class="magnifier" id="magnifier" style="display:none; position:fixed; width:150px; height:150px; border-radius:50%; overflow:hidden; pointer-events:none; z-index:10000; border:3px solid #fff; box-shadow: 0 0 10px rgba(0,0,0,0.7);">
</div>

<body>
  <!-- Skip to main content link for screen readers -->
  <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
  
  <header role="banner">
    <div class="header-container">
      <a href="/" class="logo">
        <img src="{{ url_for('static', filename='img/logo-ecuador.png') }}" alt="Logo oficial de Ecuador Turismo" class="logo-img" />
        <span class="logo-text">PORTAL TUR√çSTICO EC</span>
      </a>

      <div class="language-selector">
        <form method="get" action="{{ url_for('cambiar_idioma') }}" style="display:inline;">
          <select name="lang" onchange="this.form.submit()" aria-label="Seleccionar idioma">
            <option value="es" {% if lang == 'es' %}selected{% endif %}>Espa√±ol</option>
            <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
          </select>
        </form>
      </div>

      <div class="menu-accesibilidad" role="navigation" aria-label="Herramientas de accesibilidad">
        <button class="menu-toggle" onclick="toggleAccMenu()" aria-expanded="false" aria-controls="accesibilidad-lista">
          <span aria-hidden="true">‚ôø</span> Accesibilidad <span aria-hidden="true">‚ñæ</span>
        </button>
        <ul id="accesibilidad-lista" class="accesibilidad-lista oculto" role="menu">
          <li role="none"><button role="menuitem" onclick="activateHighContrast()">üåì Alto contraste</button></li>
          <li role="none"><button role="menuitem" onclick="toggleMonochrome()">‚ö´ Modo monocrom√°tico</button></li>
          <li role="none"><button role="menuitem" onclick="increaseTextSize()">üëÅÔ∏è Aumentar texto</button></li>
          <li role="none"><button role="menuitem" onclick="decreaseTextSize()">üëÅÔ∏è Disminuir texto</button></li>
          <li role="none"><button role="menuitem" onclick="adjustSpacing('increase')">‚ÜîÔ∏è Aumentar espaciado</button></li>
          <li role="none"><button role="menuitem" onclick="adjustSpacing('decrease')">‚ÜîÔ∏è Disminuir espaciado</button></li>
          <li role="none"><button role="menuitem" onclick="useReadableFont()">üÖ∞Ô∏è Tipograf√≠a dislexia-friendly</button></li>
          <li role="none"><button role="menuitem" onclick="toggleZoom()">üîç Zoom de p√°gina</button></li>
          <li role="none"><button role="menuitem" onclick="activarLupaPuntual()">üîé Lupa puntual</button></li>
          <li role="none"><button role="menuitem" onclick="highlightFocus()">üî¶ Resaltar foco/enlaces</button></li>
          <li role="none"><button role="menuitem" onclick="pauseAnimations()">‚è∏Ô∏è Pausar animaciones</button></li>
          <li role="none"><button role="menuitem" onclick="readText()">üëÇ Lector de pantalla</button></li>
          <li role="none"><button role="menuitem" onclick="showAudioDescription()">üéß Descripci√≥n de audio</button></li>
          <li role="none"><button role="menuitem" onclick="resetAccessibility()">‚ôªÔ∏è Restablecer</button></li>
        </ul>
      </div>

      <nav class="nav" role="navigation" aria-label="Navegaci√≥n principal">
        <ul>
          <li><a href="/">{{ textos[lang]['inicio'] }}</a></li>
          <li><a href="/rutas/nueva">{{ textos[lang]['rutas'] }}</a></li>
          <li><a href="#alojamientos">Alojamientos</a></li>
          <li><a href="#accesibilidad">{{ textos[lang]['accesibilidad'] }}</a></li>
          <li><a href="/contacto">{{ textos[lang]['contacto'] }}</a></li>
        </ul>
      </nav>

      <div class="header-actions">
        <a href="/login" class="btn btn-secondary">{{ textos[lang]['login'] }}</a>
        <a href="/registro" class="btn btn-primary">{{ textos[lang]['registro'] }}</a>
      </div>
    </div>
  </header>

  <main id="main-content" role="main">
    <!-- Hero Section -->
    <section class="hero-section fade-in">
      <h1 class="hero-title">{{ textos[lang]['hero_title'] }}</h1>
      <p class="hero-subtitle">{{ textos[lang]['hero_subtitle'] }}</p>
      <div class="hero-actions">
        <a href="/rutas" class="btn btn-primary">Explorar Destinos</a>
        <a href="/contacto" class="btn btn-outline">Contactar</a>
      </div>
    </section>

    <!-- Banner Rotativo -->
    <section class="banner-rotativo" aria-label="Im√°genes de destinos tur√≠sticos de Ecuador">
      <img src="{{ url_for('static', filename='img/banner1.jpg') }}" class="active" alt="Vista panor√°mica de Cuenca, ciudad patrimonio de la humanidad" />
      <img src="{{ url_for('static', filename='img/banner2.jpg') }}" alt="Playa de Salinas con aguas cristalinas del Pac√≠fico" />
      <img src="{{ url_for('static', filename='img/banner3.jpg') }}" alt="Paisaje monta√±oso de los Andes ecuatorianos" />
      
      <div class="banner-overlay">
        <h2 class="banner-title">Ecuador te espera</h2>
        <p class="banner-description">Descubre la diversidad natural y cultural de nuestro pa√≠s</p>
      </div>
      
      <div class="banner-controls">
        <button class="active" onclick="cambiarBanner(0)" aria-label="Ir a imagen 1"></button>
        <button onclick="cambiarBanner(1)" aria-label="Ir a imagen 2"></button>
        <button onclick="cambiarBanner(2)" aria-label="Ir a imagen 3"></button>
      </div>
    </section>

    <!-- Video Section -->
    <section class="video-section slide-in">
      <h2>Video tur√≠stico sobre Ecuador</h2>
      <div class="video-container">
        <video controls>
          <source src="/static/videos/ecuador.mp4" type="video/mp4">
          <track src="/static/videos/subtitulos.vtt" kind="subtitles" srclang="es" label="Espa√±ol" default>
          Tu navegador no soporta el video.
        </video>
      </div>
      <div class="video-actions">
        <a href="/static/transcripciones/ecuador.txt" download class="btn btn-secondary">Descargar transcripci√≥n</a>
        <button onclick="mostrarAlertaVisual('¬°Alerta visual de ejemplo para usuarios con discapacidad auditiva!')" class="btn btn-outline">Probar alerta visual</button>
      </div>
    </section>

    <!-- Mapa Section -->
    <section class="map-section" aria-labelledby="mapa-titulo">
      <h2 id="mapa-titulo">Mapa de Rutas Tur√≠sticas</h2>
      <div id="map" role="application" aria-label="Mapa interactivo de destinos tur√≠sticos de Ecuador"></div>
    </section>

    <!-- Destinos Destacados -->
    <section class="destinos-destacados" aria-labelledby="destinos-titulo">
      <h2 id="destinos-titulo">{{ textos[lang]['destinos_titulo'] }}</h2>
      <div class="destinos-grid">
        <article class="destino-card fade-in">
          <img src="{{ url_for('static', filename='img/cuenca.jpg') }}" alt="Centro hist√≥rico de Cuenca" />
          <div class="destino-content">
            <h3>Cuenca</h3>
            <p>Ciudad patrimonio de la humanidad con arquitectura colonial y artesan√≠as tradicionales.</p>
            <a href="#" class="btn-destino" aria-label="Ver m√°s informaci√≥n sobre Cuenca">{{ textos[lang]['ver_mas'] }}</a>
          </div>
        </article>
        
        <article class="destino-card fade-in">
          <img src="{{ url_for('static', filename='img/salinas.jpg') }}" alt="Playa de Salinas" />
          <div class="destino-content">
            <h3>Salinas</h3>
            <p>Hermosa playa del Pac√≠fico con excelente infraestructura tur√≠stica y accesibilidad.</p>
            <a href="#" class="btn-destino" aria-label="Ver m√°s informaci√≥n sobre Salinas">{{ textos[lang]['ver_mas'] }}</a>
          </div>
        </article>
        
        <article class="destino-card fade-in">
          <img src="{{ url_for('static', filename='img/manta.jpg') }}" alt="Ciudad de Manta" />
          <div class="destino-content">
            <h3>Manta</h3>
            <p>Puerto pesquero con hermosas playas y deliciosa gastronom√≠a marina.</p>
            <a href="#" class="btn-destino" aria-label="Ver m√°s informaci√≥n sobre Manta">{{ textos[lang]['ver_mas'] }}</a>
          </div>
        </article>
      </div>
    </section>
  </main>
  <section class="checklist-main" style="max-width:900px;margin:3rem auto 2rem auto;padding:2rem;background:#f9fafb;border-radius:1.5rem;box-shadow:0 2px 16px rgba(37,99,235,0.07);">
    <h1 style="text-align:center;margin-bottom:2rem;">Checklist de Usabilidad y Accesibilidad</h1>
    <section class="checklist-bloque" style="margin-bottom:2.5rem;">
      <h2 style="color:#2563eb;">1. Accesibilidad y Usabilidad del Sistema</h2>
      <ul class="checklist-lista" style="margin-top:1rem;line-height:2;font-size:1.1em;">
        <li>‚úÖ Modo alto contraste</li>
        <li>‚úÖ Modo monocrom√°tico/inversi√≥n de color</li>
        <li>‚úÖ Aumentar/disminuir tama√±o de texto</li>
        <li>‚úÖ Ajustar espaciado (l√≠nea, palabra, car√°cter)</li>
        <li>‚úÖ Tipograf√≠a dislexia-friendly</li>
        <li>‚úÖ Zoom de p√°gina / lupa puntual</li>
        <li>‚úÖ Resaltar foco y enlaces</li>
        <li>‚úÖ Navegaci√≥n por teclado y skiplinks</li>
        <li>‚úÖ Pausar/ocultar animaciones</li>
        <li>‚úÖ Lector de pantalla integrado (texto a voz)</li>
        <li>‚úÖ Descripci√≥n de audio</li>
        <li>‚úÖ Men√∫ consistente y jer√°rquico</li>
        <li>‚úÖ Iconos y texto en men√∫</li>
        <li>‚úÖ Responsive y compatible con lectores de pantalla</li>
        <li>‚úÖ Feedback visual (hover, foco, animaciones)</li>
        <li>‚úÖ Soporte multiling√ºe</li>
      </ul>
    </section>
    <section class="checklist-bloque">
      <h2 style="color:#10b981;">2. Formularios y Flujos Principales</h2>
      <ul class="checklist-lista" style="margin-top:1rem;line-height:2;font-size:1.1em;">
        <li>‚úÖ Etiquetas claras y visibles en todos los campos</li>
        <li>‚úÖ Validaci√≥n en tiempo real y mensajes de error espec√≠ficos</li>
        <li>‚úÖ Botones claros y comprensibles (‚ÄúEnviar‚Äù, ‚ÄúCancelar‚Äù, etc.)</li>
        <li>‚úÖ Feedback visual al guardar/enviar (mensajes, animaciones)</li>
        <li>‚úÖ Confirmaci√≥n previa en acciones cr√≠ticas (editar email, etc.)</li>
        <li>‚úÖ Prevenci√≥n de intentos m√∫ltiples (captcha/alerta)</li>
        <li>‚úÖ Autofocus en campos clave</li>
        <li>‚úÖ Autocompletado y sugerencias</li>
        <li>‚úÖ Agrupaci√≥n l√≥gica con fieldset/legend</li>
        <li>‚úÖ Mensaje visible si no hay resultados</li>
        <li>‚úÖ Dise√±o responsive y accesible</li>
        <li>‚úÖ Captcha o verificaci√≥n antispam en contacto/login</li>
        <li>‚úÖ Mensaje de ‚Äúprocesando‚Äù en formularios</li>
        <li>‚úÖ No pedir m√°s datos de los necesarios</li>
      </ul>
    </section>
  </section>

  <!-- Modal de Registro de Usuario -->
  <div id="modal-auth" class="modal oculto" role="dialog" aria-labelledby="modal-registro-titulo" aria-hidden="true">
    <div class="modal-content">
      <span class="cerrar" onclick="cerrarModal('modal-auth')" aria-label="Cerrar ventana de registro">&times;</span>
      <h2 id="modal-registro-titulo" class="form-title">Crear una cuenta</h2>
      <form id="form-registro" role="form" aria-describedby="registro-descripcion">
        <p id="registro-descripcion" class="sr-only">Formulario para crear una nueva cuenta de usuario</p>
        <div class="form-group">
          <label for="usuario">Usuario:</label>
          <input type="text" id="usuario" name="usuario" class="form-control" placeholder="Ingrese su nombre de usuario" required 
                 aria-describedby="usuario-error" />
          <div id="usuario-error" class="error-message" role="alert" aria-live="polite"></div>
        </div>
        <div class="form-group">
          <label for="clave">Contrase√±a:</label>
          <input type="password" id="clave" name="clave" class="form-control" placeholder="Ingrese su contrase√±a" required 
                 aria-describedby="clave-error" />
          <div id="clave-error" class="error-message" role="alert" aria-live="polite"></div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" aria-label="Crear cuenta de usuario">Registrarse</button>
        </div>
      </form>
      <p class="text-center mt-3">¬øYa tienes cuenta? <a href="#" onclick="cerrarModal('modal-auth'); mostrarModal('modal-login')">Inicia sesi√≥n</a></p>
    </div>
  </div>

  <!-- Modal de Registro de Administrador -->
  <div id="modal-admin" class="modal oculto" role="dialog" aria-labelledby="modal-admin-titulo" aria-hidden="true">
    <div class="modal-content">
      <span class="cerrar" onclick="cerrarModal('modal-admin')" aria-label="Cerrar ventana de registro de admin">&times;</span>
      <h2 id="modal-admin-titulo" class="form-title">Registrar Administrador</h2>
      <form id="form-registro-admin" role="form" aria-describedby="admin-descripcion">
        <p id="admin-descripcion" class="sr-only">Formulario para crear una nueva cuenta de administrador</p>
        <div class="form-group">
          <label for="admin-usuario">Usuario:</label>
          <input type="text" id="admin-usuario" name="usuario" class="form-control" placeholder="Nombre de usuario" required />
        </div>
        <div class="form-group">
          <label for="admin-clave">Contrase√±a:</label>
          <input type="password" id="admin-clave" name="clave" class="form-control" placeholder="Contrase√±a" required />
        </div>
        <div class="form-group">
          <label for="admin-email">Email:</label>
          <input type="email" id="admin-email" name="email" class="form-control" placeholder="Correo electr√≥nico" required />
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" aria-label="Registrar administrador">Registrar Admin</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Login -->
  <div id="modal-login" class="modal oculto" role="dialog" aria-labelledby="modal-login-titulo" aria-hidden="true">
    <div class="modal-content">
      <span class="cerrar" onclick="cerrarModal('modal-login')" aria-label="Cerrar ventana de inicio de sesi√≥n">&times;</span>
      <h2 id="modal-login-titulo" class="form-title">Iniciar sesi√≥n</h2>
      <form id="form-login" role="form" aria-describedby="login-descripcion">
        <p id="login-descripcion" class="sr-only">Formulario para iniciar sesi√≥n en el portal</p>
        <div class="form-group">
          <label for="login-usuario">Usuario:</label>
          <input type="text" id="login-usuario" name="usuario" class="form-control" placeholder="Ingrese su nombre de usuario" required 
                 aria-describedby="login-usuario-error" />
          <div id="login-usuario-error" class="error-message" role="alert" aria-live="polite"></div>
        </div>
        <div class="form-group">
          <label for="login-clave">Contrase√±a:</label>
          <input type="password" id="login-clave" name="clave" class="form-control" placeholder="Ingrese su contrase√±a" required 
                 aria-describedby="login-clave-error" />
          <div id="login-clave-error" class="error-message" role="alert" aria-live="polite"></div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" aria-label="Iniciar sesi√≥n">Iniciar sesi√≥n</button>
        </div>
      </form>
      <p class="text-center mt-3">¬øNo tienes cuenta? <a href="#" onclick="cerrarModal('modal-login'); mostrarModal('modal-auth')">Reg√≠strate</a></p>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Portal Tur√≠stico Ecuador</h3>
        <p>Descubre la belleza y diversidad de Ecuador con nuestro portal tur√≠stico inclusivo y accesible para todos.</p>
      </div>
      
      <div class="footer-section">
        <h3>Enlaces r√°pidos</h3>
        <ul>
          <li><a href="/">Inicio</a></li>
          <li><a href="/rutas">Rutas tur√≠sticas</a></li>
          <li><a href="/contacto">Contacto</a></li>
          <li><a href="/login">Iniciar sesi√≥n</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Destinos</h3>
        <ul>
          <li><a href="#">Cuenca</a></li>
          <li><a href="#">Salinas</a></li>
          <li><a href="#">Manta</a></li>
          <li><a href="#">Quito</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Accesibilidad</h3>
        <ul>
          <li><a href="#accesibilidad">Herramientas</a></li>
          <li><a href="#">Gu√≠a de uso</a></li>
          <li><a href="#">Soporte t√©cnico</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2024 Portal Tur√≠stico Ecuador. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="{{ url_for('static', filename='js/accesibilidad.js') }}"></script>
  
  <script>
    // Banner rotativo
    let currentBanner = 0;
    const banners = document.querySelectorAll('.banner-rotativo img');
    const controls = document.querySelectorAll('.banner-controls button');
    
    function cambiarBanner(index) {
      banners[currentBanner].classList.remove('active');
      controls[currentBanner].classList.remove('active');
      
      currentBanner = index;
      
      banners[currentBanner].classList.add('active');
      controls[currentBanner].classList.add('active');
    }
    
    function autoCambiarBanner() {
      const nextBanner = (currentBanner + 1) % banners.length;
      cambiarBanner(nextBanner);
    }
    
    // Cambiar banner cada 5 segundos
    setInterval(autoCambiarBanner, 5000);
    
    // Funciones de modal
    function mostrarModal(modalId) {
      document.getElementById(modalId).classList.remove('oculto');
    }
    
    function cerrarModal(modalId) {
      document.getElementById(modalId).classList.add('oculto');
    }
    
    // Cerrar modal al hacer clic fuera
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.add('oculto');
        }
      });
    });
    
    // Mapa de Leaflet
    document.addEventListener('DOMContentLoaded', function() {
      const map = L.map('map').setView([-1.8312, -78.1834], 7);
      
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors'
      }).addTo(map);
      
      // Marcadores de ejemplo
      const destinos = [
        {lat: -2.9006, lng: -79.0045, nombre: 'Cuenca', descripcion: 'Ciudad patrimonio de la humanidad'},
        {lat: -2.2167, lng: -80.9667, nombre: 'Salinas', descripcion: 'Hermosa playa del Pac√≠fico'},
        {lat: -0.9500, lng: -80.7167, nombre: 'Manta', descripcion: 'Puerto pesquero y playas'},
        {lat: -0.2299, lng: -78.5249, nombre: 'Quito', descripcion: 'Capital de Ecuador'}
      ];
      
      destinos.forEach(destino => {
        L.marker([destino.lat, destino.lng])
          .addTo(map)
          .bindPopup(`
            <div class="map-popup">
              <h3>${destino.nombre}</h3>
              <p>${destino.descripcion}</p>
              <button class="btn-destino">Ver m√°s</button>
            </div>
          `);
      });
    });
    
    // Funci√≥n para mostrar alertas visuales
    function mostrarAlertaVisual(mensaje) {
      const notification = document.createElement('div');
      notification.className = 'notification info';
      notification.innerHTML = `
        <h4>Alerta Visual</h4>
        <p>${mensaje}</p>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 5000);
    }
    
    // Animaciones al hacer scroll
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
        }
      });
    }, observerOptions);
    
    document.querySelectorAll('.destino-card, .video-section, .map-section').forEach(el => {
      observer.observe(el);
    });
  </script>
</body>
</html>
